## 백준 15683 감시

### 문제 설명

https://www.acmicpc.net/problem/15683

스타트링크의 사무실은 1×1크기의 정사각형으로 나누어져 있는 N×M 크기의 직사각형으로 나타낼 수 있다. 사무실에는 총 K개의 CCTV가 설치되어져 있는데, CCTV는 5가지 종류가 있다. 각 CCTV가 감시할 수 있는 방법은 다음과 같다.

1번 CCTV는 한 쪽 방향만 감시할 수 있다. 2번과 3번은 두 방향을 감시할 수 있는데, 2번은 감시하는 방향이 서로 반대방향이어야 하고, 3번은 직각 방향이어야 한다. 4번은 세 방향, 5번은 네 방향을 감시할 수 있다.

CCTV는 감시할 수 있는 방향에 있는 칸 전체를 감시할 수 있다. 사무실에는 벽이 있는데, CCTV는 벽을 통과할 수 없다. CCTV가 감시할 수 없는 영역은 사각지대라고 한다.

CCTV는 회전시킬 수 있는데, 회전은 항상 90도 방향으로 해야 하며, 감시하려고 하는 방향이 가로 또는 세로 방향이어야 한다.

사무실의 크기와 상태, 그리고 CCTV의 정보가 주어졌을 때, CCTV의 방향을 적절히 정해서, 사각 지대의 최소 크기를 구하는 프로그램을 작성하시오.

#### 입력
첫째 줄에 사무실의 세로 크기 N과 가로 크기 M이 주어진다. (1 ≤ N, M ≤ 8)

둘째 줄부터 N개의 줄에는 사무실 각 칸의 정보가 주어진다. 0은 빈 칸, 6은 벽, 1~5는 CCTV를 나타내고, 문제에서 설명한 CCTV의 종류이다. 

CCTV의 최대 개수는 8개를 넘지 않는다.

#### 출력
첫째 줄에 사각 지대의 최소 크기를 출력한다.

### 문제 접근

처음에 문제 슥 읽고 그냥 한번 쭉 순회하면서 구현하면 되는거 아니야? 라고 생각했으나 "CCTV는 회전시킬 수 있다"는 부분을 제대로 읽지 못했음.

문제가 길고 그림 사이사이에 조건이 있으므로 꼼꼼히 읽으며 조건을 모두 파악해야 한다.

입력 제한에 N, M의 크기가 크지 않고, CCTV 최대 갯수도 8개라고 되어있어서 완전탐색을 하면 될 것 같았다.

CCTV의 모든 회전 방향을 고려하기 위해서 DFS처럼 구현하면 될 것 같다고 생각하여 일단 그 방식으로 접근했다.

### 코드 간단 설명
```
void fill_cctv(int direction, int i, int j, int flag)
  // (i, j)가 주어졌을 때 cctv의 감시 범위를 표시하는 함수
  // direction에 따라서 직선으로 감시 범위를 표시한다.
  // 1: 오른쪽, 2: 윗쪽, 3: 왼쪽, 4: 아랫쪽
  // flag == 1이면 감시 범위 표시(-1), flag == 0이면 감시 범위 풀기(+1)
  // cctv를 만나면 무시하고 범위 표시 진행
  // 벽(6)을 만나면 범위 표시 중단

void find_blind_spot(int depth)
  // dfs 실행하는 함수
  if depth == cctv 개수
    사각지대 개수 세기
    min 값보다 작은 경우 min 값 갱신
    return;
  
  cctv 번호에 따라 가능한 회전 모두 고려하며 dfs 진행

int main()
  입력값 받음
  // dfs 탐색 시작
  find_blind_spot(0)
```

#### 주의해야할 점
- CCTV의 감시가 CCTV를 통과할 수 있다는 점 주의! 벽이나 사무실의 범위를 넘어가지 않는 이상 감시할 수 있다.

- DFS를 진행할 때 감시 위치를 표시 -> 다음 depth 진행 -> 표시한 감시위치 복구

    의 과정을 진행할 때 처음에서는 -1, 0으로 표시하면서 진행했다. 하지만 이 경우 여러개의 CCTV가 겹쳐서 감시를 하는 위치의 경우 마지막 CCTV에서 감시 범위를 풀 때 다른 CCTV에 의해 감시되는 위치가 함께 풀려버리는 문제가 발생한다. 
    
    true/false로 표시하는 방법이 아니라 값을 누적해서 더하는 방식으로 이 부분을 처리했다. 
    
    감시 범위를 표시할 때 해당 위치의 map 값에 -1을 하고, 감시 범위를 풀 때 +1을 계산하여, 마지막에 0을 가진 경우만 사각지대로 판단했다. (감시 위치를 풀더라도 이전에 다른 CCTV가 감시하고 있었다면 사각지대로 판단되지 않는다.)



